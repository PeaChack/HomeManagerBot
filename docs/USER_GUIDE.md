## Руководство пользователя

### Установка и запуск
1. Установите Python 3.11+.
2. Создайте виртуальное окружение и установите зависимости:
```
python -m venv .venv
.venv\Scripts\activate  # Windows
# или
source .venv/bin/activate  # Linux/Mac
pip install -r requirements.txt
```
3. Скопируйте `env.example` в `.env` и укажите `HMB_BOT_TOKEN`.
4. Запустите бота:
```
python -m app.main
```

### Базовые команды
- `/start` — приветствие.

### Клавиатуры
- После `/start` появляется главное меню (reply-клавиатура): «Покупки», «Блюда», «Меню», «Семья».
- В «Покупки» показывается инлайн-список с кнопками для отметки «куплено» и кнопка «Очистить купленные».
- Кнопки разделов открывают подсказки и/или соответствующие списки.

### Настройка команд в BotFather
Чтобы в клиенте Telegram отображались подсказки команд, в чате с `@BotFather` используйте:

1) Выбрать бота: `/mybots` → выберите бота → Bot Settings → Edit Commands
2) Вставьте список команд:
```
start - запуск и помощь
family_create - создать семью и сделать активной
family_list - показать мои семьи
family_set - установить активную семью
family_join - присоединиться к семье по id
buy_add - добавить позицию в покупки
buy_list - показать список покупок
buy_done - отметить покупку выполненной
buy_check - чек-лист покупок с кнопками
dish_add - добавить блюдо
dish_list - список блюд
ing_add - добавить ингредиент в блюдо
menu_add - запланировать блюдо на дату
menu_list - запланированное меню на дату
```

#### Семьи
- `/family_create <название>` — создать семью и сделать её активной.
- `/family_list` — список семей, где вы участник.
- `/family_set <id|null>` — сделать семью активной или сбросить.
- `/family_join <id>` — присоединиться к существующей семье по id.

#### Покупки
- `/buy_add [family_id] <позиция>` — добавить позицию (если есть активная семья, `family_id` можно не указывать).
- `/buy_list [family_id]` — показать список покупок (незавершённых).
- `/buy_done <item_id>` — отметить позицию купленной.
- `/buy_check [family_id]` — чек-лист с инлайн-кнопками «куплено».
- Удобное добавление: нажмите «Добавить в покупки» (или `/buy_add_ui`) — появится клавиатура с 10 популярными позициями и вариант «Ввести вручную».

#### Блюда и меню (MVP)
- `/dish_add <название>` — создать блюдо в активной семье.
- `/dish_list` — список блюд активной семьи.
- `/ing_add <dish_id> <ингредиент>` — добавить ингредиент к блюду.
- `/menu_add <YYYY-MM-DD> <dish_id>` — запланировать блюдо на дату.
- `/menu_list <YYYY-MM-DD>` — показать блюда, запланированные на дату.
- `/dish_check <dish_id>` — чек-лист наличия ингредиентов, недостающие добавляются в покупки.

Подсказки:
- Сначала создайте семью `/family_create`, чтобы команды по умолчанию знали, куда сохранять данные.
- Идентификаторы (`dish_id`, `item_id`) можно посмотреть в списках (`/dish_list`, `/buy_list`).


